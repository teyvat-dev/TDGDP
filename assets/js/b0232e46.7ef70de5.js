"use strict";(self.webpackChunktdgdp_docs=self.webpackChunktdgdp_docs||[]).push([[582],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return m}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var p=a.createContext({}),l=function(e){var n=a.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},c=function(e){var n=l(e.components);return a.createElement(p.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=l(t),m=r,f=d["".concat(p,".").concat(m)]||d[m]||u[m]||o;return t?a.createElement(f,i(i({ref:n},c),{},{components:t})):a.createElement(f,i({ref:n},c))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,i=new Array(o);i[0]=d;var s={};for(var p in n)hasOwnProperty.call(n,p)&&(s[p]=n[p]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var l=2;l<o;l++)i[l]=t[l];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},8901:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return s},contentTitle:function(){return p},metadata:function(){return l},toc:function(){return c},default:function(){return d}});var a=t(7462),r=t(3366),o=(t(7294),t(3905)),i=["components"],s={sidebar_position:4},p="Custom parser example",l={unversionedId:"parsing/custom-example",id:"parsing/custom-example",isDocsHomePage:!1,title:"Custom parser example",description:"Here you will find an example of a working custom parser that returns the names of all the weapons currently available in genshin impacts database",source:"@site/docs/parsing/custom-example.md",sourceDirName:"parsing",slug:"/parsing/custom-example",permalink:"/docs/parsing/custom-example",editUrl:"https://github.com/teyvat-dev/TDGDP/edit/main/docs/docs/parsing/custom-example.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Make Your Own Parser",permalink:"/docs/parsing/make-your-own"},next:{title:"Make Your Own Exporter",permalink:"/docs/exporting/make-your-own"}},c=[{value:"Required files",id:"required-files",children:[],level:3},{value:"The Data Index file",id:"the-data-index-file",children:[],level:3},{value:"The Parse file",id:"the-parse-file",children:[],level:3},{value:"Conclusion",id:"conclusion",children:[],level:3}],u={toc:c};function d(e){var n=e.components,t=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"custom-parser-example"},"Custom parser example"),(0,o.kt)("p",null,"Here you will find an example of a working custom parser that returns the names of all the weapons currently available in genshin impacts database"),(0,o.kt)("h3",{id:"required-files"},"Required files"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"src/parsers/weapon-name/parse.ts\nsrc/parsers/weapon-name/utils/getWeaponNameDataIndex.ts\n")),(0,o.kt)("h3",{id:"the-data-index-file"},"The Data Index file"),(0,o.kt)("p",null,"The data require to find and list all the names of the files is easy to find and utilise as there is no need to find connections to many other data files in the GenshinData Data Dump. The file we need is\n",(0,o.kt)("inlineCode",{parentName:"p"},"<root>/data/ExcelBinOutput/WeaponExcelConfigData.json")," as this file has a list of all weapons and the properies of ",(0,o.kt)("inlineCode",{parentName:"p"},"NameTextMapHash")," which we will be using later in the parse file to get name of the weapons."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"/**\n * Dynamically imports and exports the weapon name data.\n */\nconst getWeaponNameDataIndex = async () => ({\n  weaponConfigs:\n    (await import('../../../../data/ExcelBinOutput/WeaponExcelConfigData.json'))\n      .default,\n});\n\nexport default getWeaponNameDataIndex;\n")),(0,o.kt)("h3",{id:"the-parse-file"},"The Parse file"),(0,o.kt)("p",null,"The parse file is where the logic of the parser happens, we want this parser to find all the names of every weapon. We know that the weaponConfigs data is a list of weaponConfigs and each config has a property we can use to find the name of the weapon so here is how we will accomplish it."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import type { Config } from '../../global/types/config'; // Import type for config\n\nimport getTextMapHash from '../../global/helpers/getTextMapHash'; // Import helper for text map hashes\n\nimport getWeaponNameDataIndex from './utils/getWeaponNameDataIndex'; // Import data index getter\n\n/**\n * The entrypoint parser for weapon name.\n *\n * @param config Config object\n * @returns the parsed weapon name data\n */\nconst parse = async (config: Config) => {\n  // Initialise the data index\n  const weaponNameDataIndex = await getWeaponNameDataIndex();\n  // Temporary variable for holding the parsed weapon names\n  const weaponNames = [];\n\n  // A loop over each weapon in the weaponConfigs\n  for (const weapon of weaponDataIndex.weaponConfigs) {\n    const name = getTextMapHash(weapon.NameTextMapHash); // Get the name of the weapon using the hash map helper\n\n    weaponNames.push(name); // Push resolved name into the temporary array\n  }\n\n  return weaponNames; // Return the weaponNames array with all the parsed weapon names\n};\n\nexport default parse;\n")),(0,o.kt)("h3",{id:"conclusion"},"Conclusion"),(0,o.kt)("p",null,"And thats that! You have successfully made a bare bones parser for tdgdp :) You can test it by running"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"yarn ts-node cli.ts parse weapon-name\n")),(0,o.kt)("p",null,"This should produce a file in the parsed output folder with the newly parsed data."))}d.isMDXComponent=!0}}]);