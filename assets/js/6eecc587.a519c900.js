"use strict";(self.webpackChunktdgdp_docs=self.webpackChunktdgdp_docs||[]).push([[400],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),c=p(n),m=r,h=c["".concat(l,".").concat(m)]||c[m]||u[m]||o;return n?a.createElement(h,i(i({ref:t},d),{},{components:n})):a.createElement(h,i({ref:t},d))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=c;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},5520:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return p},toc:function(){return d},default:function(){return c}});var a=n(7462),r=n(3366),o=(n(7294),n(3905)),i=["components"],s={sidebar_position:3},l="Make Your Own Parser",p={unversionedId:"parsing/make-your-own",id:"parsing/make-your-own",isDocsHomePage:!1,title:"Make Your Own Parser",description:"The following documentation consists of a in-depth look on how to structure and develop your own parsers based on the weapons parser.",source:"@site/docs/parsing/make-your-own.md",sourceDirName:"parsing",slug:"/parsing/make-your-own",permalink:"/docs/parsing/make-your-own",editUrl:"https://github.com/teyvat-dev/TDGDP/edit/main/docs/docs/parsing/make-your-own.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Configuration for Parsing",permalink:"/docs/parsing/configuration"},next:{title:"Custom parser example",permalink:"/docs/parsing/custom-example"}},d=[{value:"Structure",id:"structure",children:[],level:3},{value:"What a parser should do",id:"what-a-parser-should-do",children:[],level:3},{value:"Creating the parse file",id:"creating-the-parse-file",children:[],level:3},{value:"Creating the Data Index getter",id:"creating-the-data-index-getter",children:[],level:3},{value:"Start parsing!",id:"start-parsing",children:[],level:3}],u={toc:d};function c(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"make-your-own-parser"},"Make Your Own Parser"),(0,o.kt)("p",null,"The following documentation consists of a in-depth look on how to structure and develop your own parsers based on the weapons parser."),(0,o.kt)("h3",{id:"structure"},"Structure"),(0,o.kt)("p",null,"The structure of a parser consists of the ",(0,o.kt)("strong",{parentName:"p"},"root entity")," as the folder base with a parse file as the entrypoint of the parser."),(0,o.kt)("p",null,"eg. ",(0,o.kt)("inlineCode",{parentName:"p"},"<root>/src/parsers/<entity>/parse.ts")),(0,o.kt)("p",null,"The parser is usually accompanied by a enums file to define often used enums by the parser. This is subject to change depending on feedback."),(0,o.kt)("p",null,"All sub functions are to put into the utils folder under the parser entity folder."),(0,o.kt)("h3",{id:"what-a-parser-should-do"},"What a parser should do"),(0,o.kt)("p",null,"A parser should deal with three major things."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Prepare and load the data necissary for parsing (though the DataIndex)"),(0,o.kt)("li",{parentName:"ol"},"Parse the data loaded into a more readable and useable form"),(0,o.kt)("li",{parentName:"ol"},"Return all the parsed data as an object")),(0,o.kt)("h3",{id:"creating-the-parse-file"},"Creating the parse file"),(0,o.kt)("p",null,"To get started create a new folder with the entity name you want to make the parser for and then create a new file named parse.ts inside eg. ",(0,o.kt)("inlineCode",{parentName:"p"},"<root>/src/parsers/weapon/parse.ts")),(0,o.kt)("p",null,"Inside this file the following boilerplate should be used."),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Dont worry")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"We will explain what the getYourEntityDataIndex() next"))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import type { Config } from '../../global/types/config';\n\nimport getYourEntityDataIndex from './utils/getYourEntityDataIndex';\n\n/**\n * The entrypoint parser for <your entity>.\n *\n * @param config Config object\n * @returns the parsed entity data\n */\nconst parse = async (config: Config) => {\n  const yourEntityDataIndex = await getYourEntityDataIndex();\n\n  // Data Processing here\n\n  return dataYouProcessed;\n};\n\nexport default parse;\n")),(0,o.kt)("h3",{id:"creating-the-data-index-getter"},"Creating the Data Index getter"),(0,o.kt)("p",null,"This file is the crutial for loading in the required raw data from GenshinData (or elsewhere) that is used to produce your final parsed data result. It uses dynamic imports to save on memory~"),(0,o.kt)("p",null,"This file should be created under the ",(0,o.kt)("strong",{parentName:"p"},"utils")," directory under the parser folder eg. ",(0,o.kt)("inlineCode",{parentName:"p"},"<root>/src/parsers/<entity>/utils/getYourEntityDataIndex.ts")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"/**\n * Dynamically imports and exports the your entity data.\n */\nconst getYourEntityDataIndex = async () => ({\n  weaponConfigs:\n    (await import('../../../../data/ExcelBinOutput/WeaponExcelConfigData.json'))\n      .default, // Just an example\n  // Your data\n});\n\nexport default getYourEnityDataIndex;\n")),(0,o.kt)("h3",{id:"start-parsing"},"Start parsing!"),(0,o.kt)("p",null,"Once you have the entity named and the data required loaded its time for you to start parsing the data. This is completely up to your discression on how this is done however there are some tips that should be followed when developing a new parser."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"If you require a helper funcitons, always extract it into the utils folder to keep the parse file small"),(0,o.kt)("li",{parentName:"ul"},"Lots of id's in the data link to eachother, so its best to make a map of what id is what while developing your parser"),(0,o.kt)("li",{parentName:"ul"},"Feel free to ask questions on the Discord if you get stuck"),(0,o.kt)("li",{parentName:"ul"},"Here is an ",(0,o.kt)("a",{parentName:"li",href:"/docs/parsing/custom-example"},"example")," of a custom parser that is not used in production, but produces data with a list of all weapons names")),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Remeber")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"To test your new parser at any time you can call it using"),(0,o.kt)("p",{parentName:"div"},(0,o.kt)("inlineCode",{parentName:"p"},"yarn ts-node cli.ts parse your-entity")))))}c.isMDXComponent=!0}}]);